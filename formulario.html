<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
</head>
<body>
    <header class="header-museo">
        <div class="logo">
            <div class="foto-logo"></div> <h1>Museo de la Memoria</h1>
        </div>

        <nav>
            <ul class="menu">
                <li><a href="index.html">Home</a></li>
                <li><a href="cronologia.html">Cronología</a></li>
                <li><a href="galeria.html">Galería</a></li>
                <li><a href="testimonios.html">Testimonios</a></li>
                <li><a href="clasificador.html">Clasificador</a></li>
            </ul>
        </nav>

    </header>
    <h1>TU VOZ CUENTA</h1>
    <form id="formulario" action="vpernog@upv.edu.es" method="post" onsubmit="validar(event)">
    <h3>DONA</h3>
    <div class="campo">
        <label for="nombreCompleto">Nombre completo</label><br><br>
        <input type="text" id="nombreCompleto" name="nombre"><br><br>
    </div>
    <div class="campo">
        <label for="correo">Correo electrónico</label><br><br>
        <input type="email" id="correo" name="correo"><br><br>
    </div>
    <div id="otra" class="campo">
        <label for="cant">Cantidad a donar</label><br><br>
        <div class="botones">
            <button type="button"  onclick="gestionar(this)">60€</button>
            <button type="button"  onclick="gestionar(this)">80€</button>
            <button type="button"  onclick="gestionar(this)">120€</button>
            <button type="button"  onclick="gestionar(this); mostrar()">OTRA</button>
        </div><br>
    </div><br>
    <div class="campo">
        <input type="checkbox" id="bot1">
        <label for="bot1">Acepto la política de privacidad</label><br>
        <input type="checkbox" id="bot2">
        <label for="bot2">Deseo recibir un correo con la confirmación de la donación</label><br><br>
    </div>

    <input type="submit" value="Donar"><br><br>
    <div id="mensajes"></div>
    </form>
    <script>
        function gestionar(elem){
            var dinero=document.getElementById("dinero");
            if (dinero){
                dinero.remove();
            }
            var botones = document.querySelectorAll('.botones button');
            for (var i=0;i<botones.length;i++){
                botones[i].style.backgroundColor = "";
                botones[i].style.color = "";
            }
            elem.style.backgroundColor = "#fe5929";
            elem.style.color = "white";
        }
        function mostrar(){
            var div=document.getElementById("otra");
            var input=document.createElement("input");
            input.type="number";
            input.id="dinero";
            input.min=0;
            input.step=1;
            div.appendChild(input);
        }
        function validar(event){
            event.preventDefault();

            var c_nombre=document.getElementById("nombreCompleto");
            var c_correo=document.getElementById("correo");
            var c_mensajes=document.getElementById("mensajes");
            var caja1=document.getElementById("bot1");

            c_mensajes.innerHTML="";
            c_nombre.style.border="";
            c_correo.style.border="";

            var boton = document.querySelector(".botones button[style*='background-color']");
            var errores = [];

            if (c_nombre.value===""){
                errores.push("Debes escribir tu nombre completo.");
                c_nombre.style.border="2px solid #fe5929";
            }
            if (c_correo.value===""){
                errores.push("Debes escribir tu correo electrónico.");
                c_correo.style.border="2px solid #fe5929";
            }
            if (!boton){
                errores.push("Debes seleccionar una cantidad de dinero.");
            } else {
                if (boton.textContent==="OTRA") {
                    var c_dinero = document.getElementById("dinero");
                    if (c_dinero.value===""){
                        errores.push("Debes introducir una cantidad de dinero.");
                        c_dinero.style.border="2px solid #fe5929";
                    }
                }
            }
            if (!caja1.checked){
                errores.push("Debes aceptar la política de privacidad.");
            }
            if (errores.length>0){
                for (var i=0;i<errores.length;i++){
                    c_mensajes.innerHTML+=errores[i]+"<br>";
                }
                c_mensajes.style.color="#fe5929";
                c_mensajes.style.fontWeight="bold";
                return false;
            }else{
                alert("Donación realizada correctamente. ¡Gracias por ayudar!");
                document.getElementById("formulario").reset();
                if (c_dinero){
                    c_dinero.remove();
                }
                boton.style.backgroundColor="";
                boton.style.color="";

                return true;                
            }

        }
    </script>
</body>

</html>